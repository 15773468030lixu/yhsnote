****

### çº¯ç»„ä»¶:é¿å…ä¸å¿…è¦çš„æ›´æ–°ï¼Œè‡ªåŠ¨å®ç°`shouldComoponentUpdate`å‡½æ•°æµ…å±‚å¯¹æ¯”`shallowcompare`ç”¨===åˆ¤æ–­å­˜å‚¨åœ°å€æ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­æ˜¯å¦æ˜¯æµ…å±‚å¯¹æ¯”[åªé€‚ç”¨äºç®€å•æ•°æ®ç±»å‹]

å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦ ç”¨çš„æ˜¯å¼•ç”¨ç±»å‹  å°±å¯ä»¥ç”¨===åˆ¤æ–­å¯¹è±¡å¼•ç”¨åœ°å€æ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­æ˜¯å¦æ˜¯æµ…å±‚å¯¹æ¯”,å¾ˆæ˜æ˜¾ï¼ŒåŸåˆ™åˆ›å»ºæ–°æ•°æ®


```js
class App extends React.component{
    state={
        num:0ï¼Œ
        obj:{num:0}
    }
    handleClick(){
        const newObj = {...newObj,num:Math.floor(Math.random()*3)}
        //æ¨èå›è°ƒå‡½æ•°çš„å†™æ³•
        this.setState(()=>{
          return  newObj 
        })
    }
      handleClick(){

        //æ¨èå›è°ƒå‡½æ•°çš„å†™æ³•
        this.setState(()=>{
          return num:Math.floor(Math.random()*3) 
        })
    }
    render(){
        console.log('çˆ¶ç»„ä»¶çš„render')
        return{
            <div>
            <h1>éšæœºæ•°ï¼š{this.state.num}</h1>
            <button onClick="this.handleClick">é‡æ–°ç”Ÿæˆéšæœºæ•°</button>
            <h1>éšæœºæ•°ï¼š{this.state.obj.num}</h1>
            <button onClick="this.handleClick">é‡æ–°ç”Ÿæˆéšæœºæ•°</button>
            </div>
        }

    }
}
```

####  ç¢°åˆ°ä¿®æ”¹å¼•ç”¨ç±»å‹ï¼Œä¸€å®šè¦åˆ›å»ºæ–°æ•°æ®ï¼Œä¸è¦åœ¨æœ¬èº«å»ä¿®æ”¹
##  é¼ æ ‡ç§»åŠ¨ï¼ŒçŒ«è·Ÿç€ç§»åŠ¨ï¼Œå¤ç”¨åæ ‡ï¼ŒçŠ¶æ€é€»è¾‘
ç»„ä»¶å¤ç”¨çš„ä¸¤ç§æ¨¡å¼ï¼šrender props/é«˜é˜¶ç»„ä»¶HOC

```js
class Mouse extends React.component{
    state={
        x:0,
        y:0
    }
    handelMovie(){
        this.setState({
          x:e.clientX
          y:e.clientY})
         }
    //é¼ æ ‡ç§»åŠ¨äº‹ä»¶çš„ç›‘å¬å¤„ç†ç¨‹åºğŸ’‘
    componentDidMount(e){
            window.addEventListener('mousemove',this.handleMovie)

    }
    componentWillUnmount(e){
            window.removeEventListener('mousemove',this.handleMovie)

    }
    //éªŒè¯è¿™ä¸ªä»£ç æ˜¯å¦ç”Ÿæ•ˆ
     render(){
        console.log('çˆ¶ç»„ä»¶çš„render')
        return{
          this.props.render(this.state)ğŸ˜Šè¦æ¸²æŸ“çš„å†…å®¹
          this.props.children(this.state)ğŸ˜Šè¦æ¸²æŸ“çš„å†…å®¹

        }
        //propsæ˜¯ä¸€å€‹å‡½æ•¸ï¼Œå¹¶ä¸”å‘Šè¯‰ç»„ä»¶è¦æ¸²æŸ“ä»€ä¹ˆæŠ€æœ¯å«åšrender props

    }
}

class App extends React.component{
    render(){
        console.log('çˆ¶ç»„ä»¶çš„render')
        return{
            // <div>
            // <h1>renderpropsæ¨¡å¼</h1>
            // <Mouse render ={mouse}/>
            // </div>
            <div>
            <h1>renderpropsæ¨¡å¼</h1>
            <Mouse>{
                mouse =><img src={img} style="position:absoulute,top:mouse.x-width/2,left:mouse.y -height/2"/>
            }</Mouse>
            // æˆ–è€…
                 <Mouse render ={mouse=>{
                return <img src={img} style="position:absoulute,top:mouse.x-width/2,left:mouse.y -height/2"/>ğŸ˜˜æ‹¿åˆ°çµ„ä»¶çš„ç‹€æ…‹
            }}/>
            </div>
        }

    }
}
```
å°è£…å¯¼èˆªæ æ ·å¼è°ƒæ•´åŠŸèƒ½å¤„ç†é«˜é˜¶ç»„ä»¶æ·»åŠ propsæ ¡éªŒ