### 什么是 DOM

    /***/

--js 表示的 ui 元素-dom 的本质-dom 由浏览器 js 表示的功能

-- 浏览器本来有颗 dom 树,所以我们只能人为使用，浏览器提高的固定 API 来操作对象

--虚拟 dom-并不是浏览器提供的，程序员手动模拟实现，类似于浏览器中 dom

**但是有本质的区别**

- 描述需求：实现一个点击表头，完成数据，根据点击的列进行排序
- 分析：列表中渲染的数据都往栈的内存中以数组的形式存在，好多个数据对象组成一个数组
  - 在每个表头绑定点击事件，在事件处理函数当中，根据点击的列名，对数据的每一项进行排序，排序好的新数组就是展示在页面的新数据【这一步完成，数组是新的，页面是老的】
  - 当得到排序好的新数组，应该把最新的数组更新到页面中
  - 1.利用原生 js 手动拼接每个字符串 tr，append 到页面中
  - 2.使用 jquery 模板引擎，把最新的 html 页面拼接到页面

**我们上述操作有什么性能问题，牵连无辜群众，哪怕数据一丢丢变化，需要重建 DOM 树**

只需要按需更新页面上的元素，把修改的数据，所对应的 dom 元素重新构建一下，其他没有变化的数据，所对应的 dom 节点不需要更新

**如何实现上述的解决方案**

页面更新前的 dom 树，页面更新前新渲染出来的 dom 树，然后对比这两颗新旧 dom 树，只需要找到需要重新创建修改的元素即可 这样就实现 dom 按需更新

**如何拿到两颗新旧dom树**

自己模拟两颗新旧 dom 树，因为浏览器没有效果的 API，实际上两个js对象模拟dom树对比

**如何自己模拟 dom 节点**

用 js 模拟一个对象

```js
<p title="zhen">wurenji<span>food</span></p>

var p ={
  //节点嵌套，手动模拟dom树原理，提供类似attr、 children属性
  tagName='p'
  attr:{
    title="zhen",
    id='',
  },
  children:[
      "wurenji",
      //模拟完整的dom节点
      {
        tagName='p'
        attr:{
             title="zhen",
             id='',
             },
        children:['food']
      }
  ]
}
```
**模拟dom 目的**

为了实现节点的高效更新

**虚拟dom 的创建**

虚拟dom框架，套用api即可

**tree diff**

新旧dom逐层对比，就叫做tree diff ，每当我们从前到后，把所有层的节点比完后，必然能够找到那些需要被更新的元素

**component diff**

在对比每一层的时候，组件之间的对比，叫做component diff ,如果两个组件的类型相同，则**暂时认为**这个组件不需要被更新，如果组件的类型不同，则立即将旧组件移除，新建组件，替换到移除位置

**element diff**

在组件中，每个元素进行对比，即元素级别的对比

**key diff**

把页面中dom节点和虚拟dom中的对象，做一层关联
